<!DOCTYPE html>
<html>
<head>
    <title>Simple Route Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .success { background: #d4edda; }
        .error { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>ç®€å•è·¯ç”±æµ‹è¯•</h1>
    
    <div class="test">
        <h3>1. æµ‹è¯•é»˜è®¤æ´»åŠ¨è·¯ç”±</h3>
        <button onclick="testDefaultEvent()">æµ‹è¯•é»˜è®¤æ´»åŠ¨</button>
        <div id="default-result"></div>
    </div>
    
    <div class="test">
        <h3>2. æµ‹è¯•å•†å®¶æ´»åŠ¨è·¯ç”±</h3>
        <button onclick="testMerchantEvent()">æµ‹è¯•å•†å®¶æ´»åŠ¨</button>
        <div id="merchant-result"></div>
    </div>
    
    <div class="test">
        <h3>3. æ£€æŸ¥æ•°æ®çŠ¶æ€</h3>
        <button onclick="checkData()">æ£€æŸ¥æ•°æ®</button>
        <div id="data-result"></div>
    </div>
    
    <script>
        function testDefaultEvent() {
            const result = document.getElementById('default-result');
            result.innerHTML = '<p>æ­£åœ¨æµ‹è¯•...</p>';
            
            fetch('/events/ridiculous-chicken-night-event')
                .then(response => {
                    if (response.ok) {
                        result.innerHTML = '<div class="success">âœ… é»˜è®¤æ´»åŠ¨è·¯ç”±æ­£å¸¸</div>';
                    } else {
                        result.innerHTML = `<div class="error">âŒ é»˜è®¤æ´»åŠ¨è·¯ç”±å¤±è´¥: ${response.status}</div>`;
                    }
                })
                .catch(error => {
                    result.innerHTML = `<div class="error">âŒ ç½‘ç»œé”™è¯¯: ${error.message}</div>`;
                });
        }
        
        function testMerchantEvent() {
            const result = document.getElementById('merchant-result');
            result.innerHTML = '<p>æ­£åœ¨æµ‹è¯•...</p>';
            
            fetch('/events/test-event-title')
                .then(response => {
                    if (response.ok) {
                        result.innerHTML = '<div class="success">âœ… å•†å®¶æ´»åŠ¨è·¯ç”±æ­£å¸¸</div>';
                    } else {
                        result.innerHTML = `<div class="error">âŒ å•†å®¶æ´»åŠ¨è·¯ç”±å¤±è´¥: ${response.status}</div>`;
                    }
                })
                .catch(error => {
                    result.innerHTML = `<div class="error">âŒ ç½‘ç»œé”™è¯¯: ${error.message}</div>`;
                });
        }
        
        function checkData() {
            const result = document.getElementById('data-result');
            
            try {
                const userData = localStorage.getItem('userData');
                const merchantEvents = JSON.parse(localStorage.getItem('merchantEvents') || '[]');
                
                let html = '<h4>æ•°æ®çŠ¶æ€:</h4>';
                
                if (userData) {
                    const user = JSON.parse(userData);
                    html += `<p>âœ… ç”¨æˆ·æ•°æ®: ${user.name} (${user.isLoggedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•'})</p>`;
                } else {
                    html += '<p>âŒ æ— ç”¨æˆ·æ•°æ®</p>';
                }
                
                html += `<p>ğŸ“Š å•†å®¶æ´»åŠ¨: ${merchantEvents.length} ä¸ª</p>`;
                
                if (merchantEvents.length > 0) {
                    html += '<h4>æ´»åŠ¨åˆ—è¡¨:</h4><ul>';
                    merchantEvents.forEach((event, index) => {
                        const slug = event.title.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-').trim();
                        html += `<li>${event.title} â†’ /events/${slug}</li>`;
                    });
                    html += '</ul>';
                }
                
                result.innerHTML = html;
            } catch (error) {
                result.innerHTML = `<div class="error">âŒ æ•°æ®æ£€æŸ¥é”™è¯¯: ${error.message}</div>`;
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥æ•°æ®
        window.onload = checkData;
    </script>
</body>
</html>
